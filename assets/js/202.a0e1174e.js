(window.webpackJsonp=window.webpackJsonp||[]).push([[202],{618:function(t,a,s){"use strict";s.r(a);var e=s(15),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"hash-模式的实现原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hash-模式的实现原理"}},[t._v("#")]),t._v(" hash 模式的实现原理")]),t._v(" "),s("p",[t._v("早期的前端路由的实现就是基于 location.hash 来实现的。其实现原理很简单，location.hash 的值就是 URL 中 # 后面的内容。比如下面这个网站，它的 location.hash 的值为 '#search'：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("https://www.word.com#search\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("路由模式的实现主要是基于下面几个特性：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("URL 中 hash 值只是客户端的一种状态，也就是说当向服务器端发出请求时，hash 部分不会被发送；")])]),t._v(" "),s("li",[s("p",[t._v("hash 值的改变，都会在浏览器的访问历史中增加一个记录。因此我们能通过浏览器的回退、前进按钮控制hash 的切换；")])]),t._v(" "),s("li",[s("p",[t._v("可以通过 a 标签，并设置 href 属性，当用户点击这个标签后，URL 的 hash 值会发生改变；或者使用  JavaScript 来对 loaction.hash 进行赋值，改变 URL 的 hash 值；")])]),t._v(" "),s("li",[s("p",[t._v("我们可以使用 hashchange 事件来监听 hash 值的变化，从而对页面进行跳转（渲染）。")])])]),t._v(" "),s("h3",{attrs:{id:"history-模式的实现原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#history-模式的实现原理"}},[t._v("#")]),t._v(" history 模式的实现原理")]),t._v(" "),s("p",[t._v("HTML5 提供了 History API 来实现 URL 的变化。其中做最主要的 API 有以下两个："),s("code",[t._v("history.pushState()")]),t._v(" 和 "),s("code",[t._v("history.repalceState()。")]),t._v("\n这两个 API 可以在不进行刷新的情况下，操作浏览器的历史纪录。唯一不同的是，前者是新增一个历史记录，后者是直接替换当前的历史记录，如下所示：")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pushState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nwindow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replaceState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("路由模式的实现主要基于存在下面几个特性：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("pushState 和 repalceState 两个 API 来操作实现 URL 的变化 ；")])]),t._v(" "),s("li",[s("p",[t._v("我们可以使用 popstate  事件来监听 url 的变化，从而对页面进行跳转（渲染）；")])]),t._v(" "),s("li",[s("p",[t._v("history.pushState() 或 history.replaceState() 不会触发 popstate 事件，这时我们需要手动触发页面跳转（渲染）。")])])]),t._v(" "),s("h4",{attrs:{id:"参考文章链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文章链接"}},[t._v("#")]),t._v(" 参考文章链接")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.cn/post/7041107063304355877",target:"_blank",rel:"noopener noreferrer"}},[t._v("一文让你弄懂前端路由到底是怎么实现的~"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://juejin.cn/post/6993840419041706014",target:"_blank",rel:"noopener noreferrer"}},[t._v("浅谈前端路由原理hash和history"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://juejin.cn/post/6988316779818778631",target:"_blank",rel:"noopener noreferrer"}},[t._v("从使用到自己实现简单Vue Router看这个就行了"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://juejin.cn/post/6991640600533532679",target:"_blank",rel:"noopener noreferrer"}},[t._v("跟着来，你也可以手写VueRouter"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);